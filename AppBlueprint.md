
# ComfyUIによる記事文章からの画像生成

## 概要

記事文章から画像生成を行うプログラム
ollamaを使用して記事要約を行い、画像生成AI用のプロンプトを生成
そのプロンプトを固定プロンプトを結合し、画像生成を行う

## 環境

- Pythonで実装
- ComfyUIは起動している前提
- ollamaはインストールされている

## 要件

- ComfyUIのAPIを使用
- ComfyUIのワークフローを指定
    - ワークフロー要件
        - ワークフローは既存のものを指定される
        - InputPromptノードという入力ノードにプロンプトテキストを受け取るよう記述されている
- 固定プロンプトは生成プロンプトを{content}というフォーマットで埋め込み最終プロンプトを生成する
- 固定プロンプトはコマンドライン引数で受け取る、画風や人物などを記事全体で統一するためのプロンプトである
- 記事は既存Markdown形式のファイルを指定
- ollamaの使用するモデルはgemma3:12bとする
- 出力画像はwebp形式で保存する
- 出力画像名は記事ファイル名.webpとする
- 出力画像は記事ファイルのあるディレクトリに保存する

## エラーハンドリング

エラーが発生した場合はエラーを出力しリトライなどは行わず停止する

## テスト方法

- testディレクトリに必要ファイルを作成しテストを行う
- 要件を満たすシンプルなワークフローを作成する
- テスト用記事ファイルを作成する
- 必要な引数パラメータを記述したテスト用バッチファイルを作成する
    - Windows環境想定
